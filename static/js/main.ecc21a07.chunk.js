(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(e,t,r){},31:function(e,t,r){},34:function(e,t,r){"use strict";r.r(t);var a=r(4),i=r(38),c=r(0),n=r.n(c),f=r(21),l=r.n(f),o=(r(30),r(5)),s=r(39),p=(r(31),r(37)),u=function(e,t,r){return e.formatMessage({id:t},r)},b=function(e){if(!e)return null;var t=e.name,r=e.baseAtk,a=e.flatAtk,i=e.percAtk,c=e.critC,n=e.critD,f=e.percEle;return r&&a&&i&&c&&n&&f?{name:t,baseAtk:r,flatAtk:a,percAtk:i,critC:c,critD:n,percEle:f}:null},j=function(e){return(100*e).toFixed(2)+"%"},k=r(7),m="profiles",O=function(){var e=window.localStorage.getItem(m);return e?JSON.parse(e):{}},g=function(e,t){window.localStorage.setItem(e,t)},h=function(e){var t=e.baseAtk,r=e.percAtk,a=e.flatAtk,i=e.critC,c=e.critD,n=e.percEle,f=t+(t*r+a),l=1+Math.min(1,i)*c;return Math.round(f*l*(1+n))},v=function(e,t){var r=Object(c.useRef)();Object(c.useEffect)((function(){if(r.current){var a=Object.keys(Object(k.a)(Object(k.a)({},r.current),t)),i={};a.forEach((function(e){r.current[e]!==t[e]&&(i[e]={from:r.current[e],to:t[e]})})),Object.keys(i).length&&console.log("[why-did-you-update]",e,i)}r.current=t}))},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=Object(p.a)(),f=Object(c.useState)(t),l=Object(o.a)(f,2),s=l[0],b=l[1],j=function(e){b(e.currentTarget.value)},m=r||"profile."+e,O=u(n,m),g=Object(a.jsxs)("span",{children:[O,Object(a.jsx)("input",Object(k.a)({type:"text",id:e,name:e,onChange:j,maxLength:"7",size:"3",value:s},i))]});return[g,s,b]},A=function(e){var t=e.id,r=e.data,i=e.onProfileChange,f=Object(p.a)(),l=Object(c.useState)(r),s=Object(o.a)(l,2),m=s[0],O=s[1];v("Profile why update?",{onProfileChange:i,profileData:m});var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=d("name",e.name,null,{size:"10",maxLength:"15"}),i=Object(o.a)(r,2),f=i[0],l=i[1],s=d("baseAtk",e.baseAtk),p=Object(o.a)(s,2),u=p[0],j=p[1],k=d("flatAtk",e.flatAtk),m=Object(o.a)(k,2),O=m[0],g=m[1],h=d("percAtk",e.percAtk?100*e.percAtk:""),A=Object(o.a)(h,2),D=A[0],C=A[1],x=d("critC",e.critC?100*e.critC:""),w=Object(o.a)(x,2),P=w[0],S=w[1],G=d("critD",e.critD?100*e.critD:""),E=Object(o.a)(G,2),y=E[0],B=E[1],I=d("eleDmg",e.percEle?100*e.percEle:""),F=Object(o.a)(I,2),R=F[0],M=F[1];return v("Hello world",{baseAtkState:j,flatAtkState:g,percAtkState:C,critRateState:S,critDmgState:B,eleDmgState:M,onProfileChange:t}),Object(c.useEffect)((function(){var e=b({name:l,baseAtk:parseInt(j),flatAtk:parseInt(g),percAtk:C/100,critC:S/100,critD:B/100,percEle:M/100});t(e)}),[l,j,g,C,S,B,M,t]),Object(a.jsxs)(n.a.Fragment,{children:[f,u,O,D,P,y,R]})}(r,Object(c.useCallback)((function(e){e&&(O(e),i(t,e))}),[t,i]));return Object(a.jsx)(n.a.Fragment,{children:Object(a.jsxs)("div",{children:[g,Object(a.jsx)("br",{}),m&&u(f,"profile.summary.elePower",{power:h(m)}),Object(a.jsx)("br",{}),function(e){if(e){var t=function(e){e.baseAtk;var t=e.percAtk,r=(e.flatAtk,e.critC),a=e.critD,i=(e.percEle,h(e));return{atkPercDiff:h(Object(k.a)(Object(k.a)({},e),{},{percAtk:t+.0498}))/i-1,critRateDiff:h(Object(k.a)(Object(k.a)({},e),{},{critC:r+.033}))/i-1,critDmgDiff:h(Object(k.a)(Object(k.a)({},e),{},{critD:a+.066}))/i-1}}(e),r=t.atkPercDiff,a=t.critRateDiff,i=t.critDmgDiff,c=Math.max(r,a,i),n="";switch(c){case r:n="profile.substat.atkPercGain";break;case a:n="profile.substat.critRateGain";break;case i:n="profile.substat.critDmgGain"}var l=u(f,n,{gain:j(c)});return u(f,"profile.substat.best",{stat:l})}return null}(m),Object(a.jsx)("br",{}),function(){if(m){var e=function(e){var t=e.percAtk,r=e.critC,a=e.critD,i=h(e);return{critPercDiff:h(Object(k.a)(Object(k.a)({},e),{},{critC:r+.08,critD:a+.15}))/i-1,atk20Diff:h(Object(k.a)(Object(k.a)({},e),{},{percAtk:t+.2}))/i-1,atk30Diff:h(Object(k.a)(Object(k.a)({},e),{},{percAtk:t+.3}))/i-1,atk40Diff:h(Object(k.a)(Object(k.a)({},e),{},{percAtk:t+.4}))/i-1}}(m),t=e.critPercDiff,r=e.atk20Diff,i=e.atk30Diff,c=e.atk40Diff,l="",o=Math.max(t,r,i,c);switch(o){case t:l="profile.spiral.critBuffGain";break;case r:l="profile.spiral.atk20Gain";break;case i:l="profile.spiral.atk30Gain";break;case c:l="profile.spiral.atk40Gain"}var s="",p=Math.max(t,r);switch(p){case t:s="profile.spiral.critBuffGain";break;case r:s="profile.spiral.atk20Gain"}var b=u(f,l,{gain:j(o)}),O=u(f,"profile.spiral.chamberBuff",{buff:b}),g=u(f,s,{gain:j(p)}),v=u(f,"profile.spiral.floorBuff",{buff:g});return Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsx)("div",{children:O}),Object(a.jsxs)("div",{children:[" ",v]})]})}return null}()]})})};var D=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),r=t[0],i=t[1];Object(c.useEffect)((function(){var e=O();e&&i(e)}),[]);var n=function(e,t){O();!function(e,t){var r=O();console.log("old profiles",r),console.log("[new id, profile]",e,t),r[e]=t,g(m,JSON.stringify(r))}(e,t)};return Object(a.jsxs)("div",{className:"App",children:[Object.keys(r).map((function(e){return Object(a.jsx)(A,{id:e,data:r[e],onProfileChange:n},e)})),Object(a.jsx)("p",{}),Object(a.jsx)(A,{id:Object(s.a)(),onProfileChange:n})]})},C=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,40)).then((function(t){var r=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,n=t.getTTFB;r(e),a(e),i(e),c(e),n(e)}))};l.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(i.a,{locale:"en-US",defaultLocale:"en-US",messages:{"profile.name":"Profile Name","profile.character":"Character","profile.level":"Level","profile.baseAtk":"Base Attack","profile.percAtk":"Atk %","profile.flatAtk":"Flat Attack","profile.critC":"Crit Rate","profile.critD":"Crit Damage","profile.eleDmg":"Ele %","profile.summary.elePower":"Elemental Power: {power}","profile.substat.best":"Best substat improvement {stat}","profile.substat.atkPercGain":"4.98% Attack. Improvement: {gain}","profile.substat.critRateGain":"3.3% Crit Rate. Improvement: {gain}","profile.substat.critDmgGain":"6.6% Crit Dmg. Improvement: {gain}","profile.spiral.chamberBuff":"Best spiral chamber buff is {buff}","profile.spiral.floorBuff":"Best spiral floor buff is {buff}","profile.spiral.critBuffGain":"Crit.  Improvement: {gain}","profile.spiral.atk20Gain":"20% Atk.  Improvement: {gain}","profile.spiral.atk30Gain":"30% Atk.  Improvement: {gain}","profile.spiral.atk40Gain":"40% Atk.  Improvement: {gain}"},children:Object(a.jsx)(D,{})})}),document.getElementById("root")),C()}},[[34,1,2]]]);
//# sourceMappingURL=main.ecc21a07.chunk.js.map